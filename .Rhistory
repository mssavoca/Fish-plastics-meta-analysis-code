newdat$numfishbin[newdat$numfish >1500]= ">1500"
head(newdat, 50)
# normalized proportion of ingestion bins
summary(newdat$normalized)
newdat$normbin <- rep(NA, length(prov))
newdat$normbin[newdat$normalized >=1 & newdat$normalized<25]= "< 10"
newdat$normbin[newdat$normalized >=10 & newdat$normalized<=50]= "10-50"
newdat$normbin[newdat$normalized >50 & newdat$normalized<=100]= "51-100"
newdat$normbin[newdat$normalized >100 & newdat$normalized<500]= "101-500"
newdat$normbin[newdat$normalized >500 & newdat$normalized<=1000]= "501-1000"
newdat$normbin[newdat$normalized >1000 & newdat$normalized<=1500]= "1001-1500"
newdat$normbin[newdat$normalized >1500]= ">1500"
head(newdat, 50)
newdat$aveplast
sort(newdat$numstudies)
sort(newdat$numfish)
write.csv(newdat, "Longhurst_FishSummaryData_fullbinned.csv")
newdat
### Mapping in R
library(sf)
#note that to read in the shape file you need the full address (https://datacarpentry.org/r-raster-vector-geospatial/06-vector-open-shapefile-in-r/)
lh_prov <- st_read("/Users/test/Box Sync/Microplastics/Fish-plastics-meta-analysis-code/longhurst_v4_2010/Longhurst_world_v4_2010.shp")
ggplot() +
geom_sf(data = lh_prov) +
ggtitle("Longhurst Provs") +
coord_sf()
lh_prov
head(lh_prov@data)
head(lh_prov$data)
# now joining the binned data to the LH provs
head(newdat)
data <- read.csv("Plastics ingestion records fish master_final.csv")
nrow(data)
# want to get average proportion of plastic per province
summary(data)
head(data)
# data of interest
data2 <- data[,c("Binomial", "Oceanographic.province..from.Longhurst.2007.", "Prop.w.plastic", "NwP", "N", "Source")]
head(data2)
colnames(data2) <- c("Species", "OceanProv", "PropPlastic", "NwP", "N", "Source")
head(data2)
length(table(data2$OceanProv))
data3<- data2[order(data2$OceanProv),]
head(data3)
levels(data3$OceanProv) <- c(levels(data3$OceanProv), "CHIL", "BPLR", "NASE", "NPPF") # need to change these to match the publicly available shape file
data3$OceanProv[data3$OceanProv=="BPRL"] <- "BPLR"
data3$OceanProv[data3$OceanProv=="HUMB"] <- "CHIL"
data3$OceanProv[data3$OceanProv=="NAST E"] <- "NASE"
data3$OceanProv[data3$OceanProv=="NPSE"] <- "NPPF"
table(data3$OceanProv)
data3$OceanProv <- droplevels(data3$OceanProv)
levels(data3$OceanProv)
### set up new dataframe
prov <- unique(data3$OceanProv)
prov
length(prov)
aveplast <- rep(NA, length(prov))
numfish <- rep(NA, length(prov))
numstudies <- rep(NA, length(prov))
numspecies <- rep(NA, length(prov))
normalized <- rep(NA, length(prov))
## using this to double check the produced averages
sub <- data3[data3$OceanProv=="CHIN",]
sub
unique(sub$Source)
length(unique(sub$Source))
overallprop <- sum(sub$NwP, na.rm=T)/sum(sub$N, na.rm=T)
overallprop
normalized <- overallprop*sum(sub$N, na.rm=T)
normalized
sum(sub$N, na.rm=T)
mean(sub$PropPlastic, na.rm=T) #3 = .1077803
sum(sub$N)
nrow(sub)
length(unique(sub$Species))
for (i in 1:length(prov)){
sub <- data3[data3$OceanProv==prov[i],]
aveplast[i] <- sum(sub$NwP, na.rm=T)/sum(sub$N, na.rm=T)
numfish[i] <- sum(sub$N, na.rm=T)
numstudies[i] <- length(unique(sub$Source))
numspecies[i] <- length(unique(sub$Species))
normalized[i] <- aveplast[i]*sum(sub$N, na.rm=T)
}
aveplast
length(aveplast)
numfish
table(numfish)
numstudies
head(data3)
numspecies
newdat <- data.frame(prov, aveplast, numfish, numstudies, numspecies, normalized)
newdat
## binning data
# ave plastic
newdat$aveplastbin <- rep(NA, length(prov))
newdat$aveplastbin[newdat$aveplast<=.10]= "<.10"
newdat$aveplastbin[newdat$aveplast >.10 & newdat$aveplast<=20]= ".11-.20"
newdat$aveplastbin[newdat$aveplast >.20 & newdat$aveplast<=.30]= ".21-.30"
newdat$aveplastbin[newdat$aveplast >.30 & newdat$aveplast<=.40]= ".31-.40"
newdat$aveplastbin[newdat$aveplast >.40 & newdat$aveplast<=.50]= ".41-.50"
newdat$aveplastbin[newdat$aveplast >.50 & newdat$aveplast<=.60]= ".51-.60"
newdat$aveplastbin[newdat$aveplast >.60 & newdat$aveplast<=.70]= ".61-.70"
newdat$aveplastbin[newdat$aveplast >.70 & newdat$aveplast<=.80]= ".71-.80"
newdat$aveplastbin[newdat$aveplast >.80 & newdat$aveplast<=.90]= ".81-.90"
newdat$aveplastbin[newdat$aveplast >.90 & newdat$aveplast<=.99]= ".90-.99"
newdat$aveplastbin[newdat$aveplast ==1]= "1"
head(newdat$aveplastbin, 50)
sort(newdat$aveplastbin)
# number of studies
summary(newdat$numstudies)
newdat$numstudiesbin <- rep(NA, length(prov))
newdat$numstudiesbin[newdat$numstudies == 1] = "1"
newdat$numstudiesbin[newdat$numstudies >1 & newdat$numstudies<=5]= "2-5"
newdat$numstudiesbin[newdat$numstudies >5 & newdat$numstudies<=10]= "6-10"
newdat$numstudiesbin[newdat$numstudies >=10]= ">10"
head(newdat, 50)
# number of fish/study
summary(newdat$numfish)
newdat$numfishbin <- rep(NA, length(prov))
newdat$numfishbin[newdat$numfish >1 & newdat$numfish<10]= "< 10"
newdat$numfishbin[newdat$numfish >=10 & newdat$numfish<=50]= "10-50"
newdat$numfishbin[newdat$numfish >50 & newdat$numfish<=100]= "51-100"
newdat$numfishbin[newdat$numfish >100 & newdat$numfish<500]= "101-500"
newdat$numfishbin[newdat$numfish >500 & newdat$numfish<=1000]= "501-1000"
newdat$numfishbin[newdat$numfish >1000 & newdat$numfish<=1500]= "1001-1500"
newdat$numfishbin[newdat$numfish >1500]= ">1500"
head(newdat, 50)
# normalized proportion of ingestion bins
summary(newdat$normalized)
newdat$normbin <- rep(NA, length(prov))
newdat$normbin[newdat$normalized >=1 & newdat$normalized<25]= "< 10"
newdat$normbin[newdat$normalized >=10 & newdat$normalized<=50]= "10-50"
newdat$normbin[newdat$normalized >50 & newdat$normalized<=100]= "51-100"
newdat$normbin[newdat$normalized >100 & newdat$normalized<500]= "101-500"
newdat$normbin[newdat$normalized >500 & newdat$normalized<=1000]= "501-1000"
newdat$normbin[newdat$normalized >1000 & newdat$normalized<=1500]= "1001-1500"
newdat$normbin[newdat$normalized >1500]= ">1500"
head(newdat, 50)
newdat$aveplast
sort(newdat$numstudies)
sort(newdat$numfish)
write.csv(newdat, "Longhurst_FishSummaryData_fullbinned.csv")
newdat
newdat$prov
# now joining the binned data to the LH provs
read.csv("Longhurst_FishSummaryData_fullbinned.csv")
data <- read.csv("Plastics ingestion records fish master_final.csv")
setwd("~/Box Sync/Microplastics/Fish-plastics-meta-analysis-code")
data <- read.csv("Plastics ingestion records fish master_final.csv")
nrow(data)
# want to get average proportion of plastic per province
summary(data)
head(data)
# data of interest
data2 <- data[,c("Binomial", "Oceanographic.province..from.Longhurst.2007.", "Prop.w.plastic", "NwP", "N", "Source")]
head(data2)
colnames(data2) <- c("Species", "OceanProv", "PropPlastic", "NwP", "N", "Source")
head(data2)
length(table(data2$OceanProv))
data3<- data2[order(data2$OceanProv),]
head(data3)
levels(data3$OceanProv) <- c(levels(data3$OceanProv), "CHIL", "BPLR", "NASE", "NPPF") # need to change these to match the publicly available shape file
data3$OceanProv[data3$OceanProv=="BPRL"] <- "BPLR"
data3$OceanProv[data3$OceanProv=="HUMB"] <- "CHIL"
data3$OceanProv[data3$OceanProv=="NAST E"] <- "NASE"
data3$OceanProv[data3$OceanProv=="NPSE"] <- "NPPF"
table(data3$OceanProv)
data3$OceanProv <- droplevels(data3$OceanProv)
levels(data3$OceanProv)
### set up new dataframe
prov <- unique(data3$OceanProv)
prov
length(prov)
aveplast <- rep(NA, length(prov))
numfish <- rep(NA, length(prov))
numstudies <- rep(NA, length(prov))
numspecies <- rep(NA, length(prov))
normalized <- rep(NA, length(prov))
## using this to double check the produced averages
sub <- data3[data3$OceanProv=="CHIN",]
sub
unique(sub$Source)
length(unique(sub$Source))
overallprop <- sum(sub$NwP, na.rm=T)/sum(sub$N, na.rm=T)
overallprop
normalized <- overallprop*sum(sub$N, na.rm=T)
normalized
sum(sub$N, na.rm=T)
mean(sub$PropPlastic, na.rm=T) #3 = .1077803
sum(sub$N)
nrow(sub)
length(unique(sub$Species))
for (i in 1:length(prov)){
sub <- data3[data3$OceanProv==prov[i],]
aveplast[i] <- sum(sub$NwP, na.rm=T)/sum(sub$N, na.rm=T)
numfish[i] <- sum(sub$N, na.rm=T)
numstudies[i] <- length(unique(sub$Source))
numspecies[i] <- length(unique(sub$Species))
normalized[i] <- aveplast[i]*sum(sub$N, na.rm=T)
}
aveplast
length(aveplast)
numfish
table(numfish)
numstudies
head(data3)
numspecies
newdat <- data.frame(prov, aveplast, numfish, numstudies, numspecies, normalized)
newdat
## binning data
# ave plastic
newdat$aveplastbin <- rep(NA, length(prov))
newdat$aveplastbin[newdat$aveplast<=.10]= "<.10"
newdat$aveplastbin[newdat$aveplast >.10 & newdat$aveplast<=20]= ".11-.20"
newdat$aveplastbin[newdat$aveplast >.20 & newdat$aveplast<=.30]= ".21-.30"
newdat$aveplastbin[newdat$aveplast >.30 & newdat$aveplast<=.40]= ".31-.40"
newdat$aveplastbin[newdat$aveplast >.40 & newdat$aveplast<=.50]= ".41-.50"
newdat$aveplastbin[newdat$aveplast >.50 & newdat$aveplast<=.60]= ".51-.60"
newdat$aveplastbin[newdat$aveplast >.60 & newdat$aveplast<=.70]= ".61-.70"
newdat$aveplastbin[newdat$aveplast >.70 & newdat$aveplast<=.80]= ".71-.80"
newdat$aveplastbin[newdat$aveplast >.80 & newdat$aveplast<=.90]= ".81-.90"
newdat$aveplastbin[newdat$aveplast >.90 & newdat$aveplast<=.99]= ".90-.99"
newdat$aveplastbin[newdat$aveplast ==1]= "1"
head(newdat$aveplastbin, 50)
sort(newdat$aveplastbin)
# number of studies
summary(newdat$numstudies)
newdat$numstudiesbin <- rep(NA, length(prov))
newdat$numstudiesbin[newdat$numstudies == 1] = "1"
newdat$numstudiesbin[newdat$numstudies >1 & newdat$numstudies<=5]= "2-5"
newdat$numstudiesbin[newdat$numstudies >5 & newdat$numstudies<=10]= "6-10"
newdat$numstudiesbin[newdat$numstudies >=10]= ">10"
head(newdat, 50)
# number of fish/study
summary(newdat$numfish)
newdat$numfishbin <- rep(NA, length(prov))
newdat$numfishbin[newdat$numfish >1 & newdat$numfish<10]= "< 10"
newdat$numfishbin[newdat$numfish >=10 & newdat$numfish<=50]= "10-50"
newdat$numfishbin[newdat$numfish >50 & newdat$numfish<=100]= "51-100"
newdat$numfishbin[newdat$numfish >100 & newdat$numfish<500]= "101-500"
newdat$numfishbin[newdat$numfish >500 & newdat$numfish<=1000]= "501-1000"
newdat$numfishbin[newdat$numfish >1000 & newdat$numfish<=1500]= "1001-1500"
newdat$numfishbin[newdat$numfish >1500]= ">1500"
head(newdat, 50)
# normalized proportion of ingestion bins
summary(newdat$normalized)
newdat$normbin <- rep(NA, length(prov))
newdat$normbin[newdat$normalized >=1 & newdat$normalized<25]= "< 10"
newdat$normbin[newdat$normalized >=10 & newdat$normalized<=50]= "10-50"
newdat$normbin[newdat$normalized >50 & newdat$normalized<=100]= "51-100"
newdat$normbin[newdat$normalized >100 & newdat$normalized<500]= "101-500"
newdat$normbin[newdat$normalized >500 & newdat$normalized<=1000]= "501-1000"
newdat$normbin[newdat$normalized >1000 & newdat$normalized<=1500]= "1001-1500"
newdat$normbin[newdat$normalized >1500]= ">1500"
head(newdat, 50)
newdat$aveplast
sort(newdat$numstudies)
sort(newdat$numfish)
head(newdat)
write.csv(newdat, "Longhurst_FishSummaryData_fullbinned.csv")
# now joining the binned data to the LH provs
head(newdat)
joined<- left_join(lh_prov, newdat)
?left_join
#note that to read in the shape file you need the full address (https://datacarpentry.org/r-raster-vector-geospatial/06-vector-open-shapefile-in-r/)
lh_prov <- st_read("/Users/test/Box Sync/Microplastics/Fish-plastics-meta-analysis-code/longhurst_v4_2010/Longhurst_world_v4_2010.shp")
head(lh_prov)
joined<- left_join(lh_prov, newdat, by=c("prov" = "ProvCode"))
joined<- right_join(lh_prov, newdat, by=c("prov" = "ProvCode"))
joined<- right_join(lh_prov, newdat, by=c("ProvCode"="prov"))
joined
head(newdat)
lh_map <- ggplot() +
geom_sf(data = lh_prov) +
ggtitle("Longhurst Provs") +
coord_sf()
class(lh_map)
## mapping with attributes
ggplot(lh_map) +
geom_sf(aes(fill=aveplastbin))
#alternatively
plot(lh_prov)
## mapping with attributes
ggplot(lh_prov) +
geom_sf(aes(fill=aveplastbin))
## mapping with attributes
ggplot(joined) +
geom_sf(aes(fill=aveplastbin))
ggplot(joined) +
geom_sf(data=joined, aes(fill=aveplastbin))
library(tmap)
install.packages("tmp")
install.packages("tmap")
install.packages("tmap")
library(tmap)
tm_shape(lh_prov) +
tm_polygons("aveplastbin", palette = "YlOrBr",
title="Sample") +
tm_legend(outside = TRUE)
library(tmap)
library(tmap)
## needs to include areas with 0s
summary(joined)
?geom_sf_label
## mapping with attributes
ggplot(joined) +
geom_sf(aes(fill=aveplastbin)) +
geom_sf_label(aes(label = ProvCode))
ggplot(joined) +
geom_sf(aes(fill=aveplastbin)) +
geom_polygon()  +
geom_path(color = "black")
## mapping with attributes
ggplot(joined) +
geom_sf(aes(fill=aveplastbin)) +
geom_path(color = "black")
## mapping with attributes
ggplot(joined) +
geom_sf(aes(fill=aveplastbin)) +
geom_text(aes(label=ProvCode))
lh_prov <- st_read("/Users/test/Box Sync/Microplastics/Fish-plastics-meta-analysis-code/longhurst_v4_2010/Longhurst_world_v4_2010.shp")
lh_map <- ggplot() +
geom_sf(data = lh_prov) + geom_label(aes(label=ProvCode))+
ggtitle("Longhurst Provs") +
coord_sf()
lh_map
lh_prov <- st_read("/Users/test/Box Sync/Microplastics/Fish-plastics-meta-analysis-code/longhurst_v4_2010/Longhurst_world_v4_2010.shp")
lh_prov.2 <- fortify(lh_prov)
lh_prov.2
?fortify
lh_prov.2
merge(lh_prov.2, newdat, by.x="ProvCode", by.h="prov")
joined<- right_join(lh_prov.2, newdat, by=c("ProvCode"="prov"))
lh_map <- ggplot() +
geom_sf(data = lh_prov.2) + geom_label(aes(label=ProvCode))+
ggtitle("Longhurst Provs") +
coord_sf()
lh_map
head(lh_prov.2)
ggplot(joined) +
geom_sf(aes(fill=aveplastbin)) +
geom_text(aes(label=ProvCode))
## mapping with attributes
ggplot(joined) +
geom_sf(aes(fill=aveplastbin))
library(tidyverse)
library(gbm)
library(dismo)
library(mgcv)
library(lme4)
library(gamm4)
library(readxl)
library(readr)
library(ggplot2)
data <- read.csv("Plastics ingestion records fish master_final.csv")
nrow(data)
# want to get average proportion of plastic per province
summary(data)
head(data)
# data of interest
data2 <- data[,c("Binomial", "Oceanographic.province..from.Longhurst.2007.", "Prop.w.plastic", "NwP", "N", "Source")]
head(data2)
colnames(data2) <- c("Species", "OceanProv", "PropPlastic", "NwP", "N", "Source")
head(data2)
length(table(data2$OceanProv))
data3<- data2[order(data2$OceanProv),]
head(data3)
levels(data3$OceanProv) <- c(levels(data3$OceanProv), "CHIL", "BPLR", "NASE", "NPPF") # need to change these to match the publicly available shape file
data3$OceanProv[data3$OceanProv=="BPRL"] <- "BPLR"
data3$OceanProv[data3$OceanProv=="HUMB"] <- "CHIL"
data3$OceanProv[data3$OceanProv=="NAST E"] <- "NASE"
data3$OceanProv[data3$OceanProv=="NPSE"] <- "NPPF"
table(data3$OceanProv)
data3$OceanProv <- droplevels(data3$OceanProv)
levels(data3$OceanProv)
### set up new dataframe
prov <- unique(data3$OceanProv)
prov
length(prov)
aveplast <- rep(NA, length(prov))
numfish <- rep(NA, length(prov))
numstudies <- rep(NA, length(prov))
numspecies <- rep(NA, length(prov))
normalized <- rep(NA, length(prov))
## using this to double check the produced averages
sub <- data3[data3$OceanProv=="CHIN",]
sub
unique(sub$Source)
length(unique(sub$Source))
overallprop <- sum(sub$NwP, na.rm=T)/sum(sub$N, na.rm=T)
overallprop
normalized <- overallprop*sum(sub$N, na.rm=T)
normalized
sum(sub$N, na.rm=T)
mean(sub$PropPlastic, na.rm=T) #3 = .1077803
sum(sub$N)
nrow(sub)
length(unique(sub$Species))
for (i in 1:length(prov)){
sub <- data3[data3$OceanProv==prov[i],]
aveplast[i] <- sum(sub$NwP, na.rm=T)/sum(sub$N, na.rm=T)
numfish[i] <- sum(sub$N, na.rm=T)
numstudies[i] <- length(unique(sub$Source))
numspecies[i] <- length(unique(sub$Species))
normalized[i] <- aveplast[i]*sum(sub$N, na.rm=T)
}
aveplast
length(aveplast)
numfish
table(numfish)
numstudies
head(data3)
numspecies
newdat <- data.frame(prov, aveplast, numfish, numstudies, numspecies, normalized)
newdat
## binning data
# ave plastic
newdat$aveplastbin <- rep(NA, length(prov))
newdat$aveplastbin[newdat$aveplast<=.10]= "<.10"
newdat$aveplastbin[newdat$aveplast >.10 & newdat$aveplast<=20]= ".11-.20"
newdat$aveplastbin[newdat$aveplast >.20 & newdat$aveplast<=.30]= ".21-.30"
newdat$aveplastbin[newdat$aveplast >.30 & newdat$aveplast<=.40]= ".31-.40"
newdat$aveplastbin[newdat$aveplast >.40 & newdat$aveplast<=.50]= ".41-.50"
newdat$aveplastbin[newdat$aveplast >.50 & newdat$aveplast<=.60]= ".51-.60"
newdat$aveplastbin[newdat$aveplast >.60 & newdat$aveplast<=.70]= ".61-.70"
newdat$aveplastbin[newdat$aveplast >.70 & newdat$aveplast<=.80]= ".71-.80"
newdat$aveplastbin[newdat$aveplast >.80 & newdat$aveplast<=.90]= ".81-.90"
newdat$aveplastbin[newdat$aveplast >.90 & newdat$aveplast<=.99]= ".90-.99"
newdat$aveplastbin[newdat$aveplast ==1]= "1"
head(newdat$aveplastbin, 50)
sort(newdat$aveplastbin)
# number of studies
summary(newdat$numstudies)
newdat$numstudiesbin <- rep(NA, length(prov))
newdat$numstudiesbin[newdat$numstudies == 1] = "1"
newdat$numstudiesbin[newdat$numstudies >1 & newdat$numstudies<=5]= "2-5"
newdat$numstudiesbin[newdat$numstudies >5 & newdat$numstudies<=10]= "6-10"
newdat$numstudiesbin[newdat$numstudies >=10]= ">10"
head(newdat, 50)
# number of fish/study
summary(newdat$numfish)
newdat$numfishbin <- rep(NA, length(prov))
newdat$numfishbin[newdat$numfish >1 & newdat$numfish<10]= "< 10"
newdat$numfishbin[newdat$numfish >=10 & newdat$numfish<=50]= "10-50"
newdat$numfishbin[newdat$numfish >50 & newdat$numfish<=100]= "51-100"
newdat$numfishbin[newdat$numfish >100 & newdat$numfish<500]= "101-500"
newdat$numfishbin[newdat$numfish >500 & newdat$numfish<=1000]= "501-1000"
newdat$numfishbin[newdat$numfish >1000 & newdat$numfish<=1500]= "1001-1500"
newdat$numfishbin[newdat$numfish >1500]= ">1500"
head(newdat, 50)
# normalized proportion of ingestion bins
summary(newdat$normalized)
newdat$normbin <- rep(NA, length(prov))
newdat$normbin[newdat$normalized >=1 & newdat$normalized<25]= "< 10"
newdat$normbin[newdat$normalized >=10 & newdat$normalized<=50]= "10-50"
newdat$normbin[newdat$normalized >50 & newdat$normalized<=100]= "51-100"
newdat$normbin[newdat$normalized >100 & newdat$normalized<500]= "101-500"
newdat$normbin[newdat$normalized >500 & newdat$normalized<=1000]= "501-1000"
newdat$normbin[newdat$normalized >1000 & newdat$normalized<=1500]= "1001-1500"
newdat$normbin[newdat$normalized >1500]= ">1500"
head(newdat, 50)
newdat$aveplast
sort(newdat$numstudies)
sort(newdat$numfish)
head(newdat)
#write.csv(newdat, "Longhurst_FishSummaryData_fullbinned.csv")
############################ Spatial Data Analysis/Mapping #################################
library(sf)
library(rgdal)
library(raster)
library(maptools)
lh_prov <- st_read("~/Box Sync/Microplastics/Fish-plastics-meta-analysis-code/longhurst_v4_2010/Longhurst_world_v4_2010.shp")
lh_prov
lh_prov.2 <- fortify(lh_prov) #fortify makes this into a data frame object
####### calculating centroids for labels ###
centroids.df <- as.data.frame(st_centroid(lh_prov.2))
head(centroids.df)
joined<- right_join(lh_prov.2,newdat, by=c("ProvCode"="prov"))
head(joined)
class(joined)
centroids.df <- as.data.frame(st_centroid(joined))
centroids.df
centroids.coords <- st_coordinates(centroids.df$geometry)
centroids.coords
nrow(centroids.coords)
### combining all of the polygon data for the provinces for which we have data
full_data <- cbind(joined, centroids.coords)
class(full_data)
full_data #X and Y correspond to the centroid of the polygon
class(full_data)
ggplot(lh_prov) +
geom_sf() +
coord_sf() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
# Remove panel background
panel.background = element_blank())
lh_prov <- st_read("~/Box Sync/Microplastics/Fish-plastics-meta-analysis-code/longhurst_v4_2010/Longhurst_world_v4_2010.shp")
lh_prov
crs(lh_prov)
######### average plastic pollution map ################
abund <- read.csv("~/Box Sync/Microplastics/Fish-plastics-meta-analysis-code/Global pollution_map files/vansebillemodel_abundance.csv")
poll_lat <- read.csv("~/Box Sync/Microplastics/Fish-plastics-meta-analysis-code/Global pollution_map files/latitudes.csv")
poll_lon <- read.csv("~/Box Sync/Microplastics/Fish-plastics-meta-analysis-code/Global pollution_map files/longitudes.csv")
raster(abund)
####### Creating new object for plastic rasters
head(abund)
head(poll_lat)
head(poll_lon)
as.numeric(gsub("X", "", poll_lon))
gsub("X", "", poll_lon)
as.numeric(gsub("X", "", as.character(poll_lon)))
))
